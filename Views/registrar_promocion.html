<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Bootstrap -->
    <link href="assets/css/bootstrap.min.css" rel="stylesheet">
    <link href="assets/css/bootstrap-select.css" rel="stylesheet">
    <!-- font awesome for icons -->
    <link href="assets/css/font-awesome.min.css" rel="stylesheet">
    <!-- flex slider css -->
    <link href="assets/css/flexslider.css" rel="stylesheet" type="text/css" media="screen">
    <!-- animated css  -->
    <link href="assets/css/animate.css" rel="stylesheet" type="text/css" media="screen">
    <!-- Revolution Style-sheet -->
    <link href="assets/rs-plugin/css/settings.css" rel="stylesheet" type="text/css">
    <link href="assets/css/rev-style.css" rel="stylesheet" type="text/css">
    <!--owl carousel css-->
    <link href="assets/owl-carousel/dist/assets/owl.carousel.css" rel="stylesheet" type="text/css" media="screen">
    <link href="assets/owl-carousel/dist/assets/owl.theme.default.css" rel="stylesheet" type="text/css" media="screen">
    <!--mega menu -->
    <link href="assets/css/yamm.css" rel="stylesheet" type="text/css">
    <!--cube css-->
    <link href="assets/cubeportfolio/css/cubeportfolio.min.css" rel="stylesheet" type="text/css">
    <!-- custom css-->
    <link href="assets/css/components.css" rel="stylesheet" type="text/css" media="screen">
    <link href="assets/css/style.css" rel="stylesheet" type="text/css" media="screen">
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
          <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
          <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
        <![endif]-->
</head>

<body>
    <div class="top-bar-light">
        <div class="container">
            <div class="row">
                <div class="col-sm-4 hidden-xs">
                    <div class="top-bar-socials">
                        <a href="#" class="social-icon-sm si-dark si-gray-round si-colored-facebook">
                            <i class="fa fa-facebook"></i>
                            <i class="fa fa-facebook"></i>
                        </a>
                        <a href="#" class="social-icon-sm si-dark si-gray-round si-colored-twitter">
                            <i class="fa fa-twitter"></i>
                            <i class="fa fa-twitter"></i>
                        </a>
                        <a href="#" class="social-icon-sm si-dark si-gray-round si-colored-google-plus">
                            <i class="fa fa-youtube"></i>
                            <i class="fa fa-youtube"></i>
                        </a>
                        <a href="#" class="social-icon-sm si-dark si-gray-round si-colored-instagram">
                            <i class="fa fa-instagram"></i>
                            <i class="fa fa-instagram"></i>
                        </a>
                    </div>
                </div>
                <div class="col-sm-8 text-right">
                    <ul class="list-inline top-dark-right">
                        <li class="hidden-sm hidden-xs"><i class="fa fa-envelope"></i> dagama@gmail.com</li>
                        <li class="hidden-sm hidden-xs"><i class="fa fa-phone"></i> 999 999 999 </li>
                        <li><a class="topbar-icons" href="#"><span><i class="fa fa-search top-search"></i></span></a></li>
                    </ul>
                    <div class="search">
                        <form role="form">
                            <input type="text" class="form-control" autocomplete="off" placeholder="Buscar">
                            <span class="search-close"><i class="fa fa-times"></i></span>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="navbar navbar-default navbar-static-top yamm sticky" role="navigation">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
            </div>
            <div class="navbar-collapse collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li class=" "><a href="index.html">Inicio</a></li>
                    <li class="active">
                        <a href="nosotros.html">Nosotros</a>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle " data-toggle="dropdown">Usuario <i class="fa fa-angle-down"></i></a>
                        <ul class="dropdown-menu" role="menu">
                            <li><a href="empresa.html"> Empresa</a></li>
                            <li><a href="cine.html"> Cine</a></li>
                        </ul>
                    </li>
                    <!--menu home li end here-->
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle " data-toggle="dropdown">Operaciones <i class="fa fa-angle-down"></i></a>
                        <ul class="dropdown-menu" role="menu">
                            <li><a href="registrar_promocion.html"> Ingresar Promociones</a></li>
                            <li><a href="buscar_promocion.html"> Buscar Promociones</a></li>
                        </ul>
                    </li>
                    <li class="  ">
                        <a href="cartelera.html">Cartelera</a>
                    </li>
                </ul>
            </div>
            <!--/.nav-collapse -->
        </div>
        <!--container-->
    </div>
    <!--rev slider start-->

    <section class="container">
        <div class="form-group col-md-12">
            <select class="form-control" id="idcine">
            </select>
        </div>
        <div class="form-row">
            <div class="form-group col-md-6">
                <div class="form-group shadow-textarea">
                    <textarea class="form-control z-depth-1"  rows="5" placeholder="" id="cinexid" disabled="true">

                    </textarea>
                </div>
            </div>
            <div class="form-group col-md-6">
                <div class="list-group">
                    <label for="promocionxid"><h3>Promociones</h3></label>
                    <select class="form-control" id="promocionxid">
                    </select>
                </div>
            </div>
        </div>
    </section>
    <section class="container">
        <div class="form-group col-md-4">
            <h3>Registrar Promociones</h3>
        </div>
        <div class="form-group col-md-6">
            <button id="btnnuevo" type="button" class="btn btn-danger" >Nuevo</button>
            <button id="btnGrabar" type="button" class="btn btn-danger" >Grabar</button>
        </div>
    </section>
    <section class="container">
        <div class="form-group col-md-12">
            <label for="nombrepromo">Nombre Promoción</label>
            <input type="nombrepromo" class="form-control" id="nombrepromo"></p>
        </div>
        <div class="carousel-inner" role="listbox">
            <div class="form-row">
                <div class="form-group col-md-4">
                    <label for="precio">Precio</label>
                    <input type="number" class="form-control" id="precio" ></p>
                </div>
                <div class="form-group col-md-4">
                    <label for="dtfechainicio">Fecha Inicio</label>
                    <input type="fecha" class="form-control" id="dtfechainicio"></p>
                </div>
                <div class="form-group col-md-4">
                    <label for="dtfechafinal">Fecha Final</label>
                    <input type="fecha" class="form-control" id="dtfechafinal"></p>
                </div>
                <div class="col-lg-9">
                    <hr>
                    <div id="carouselExampleIndicators" class="carousel slide my-4" data-ride="carousel">

                    </div>
                </div>
            </div>
        </div>
        <div class="form-row">
            <ul class="nav nav-tabs">

            </ul>
        </div>

        <div id="tabs">
            <ul class="nav nav-tabs">
                <li><a href="#tabs-1">Persona</a></li>
                <li><a href="#tabs-2">Rubro</a></li>
                <li><a href="#tabs-3">Banco</a>
                <li><a href="#tabs-4">Combo</a></li>
            </ul>
            <div id="tabs-1">
                <br><h2>Personas</h2>
                <section class="container">
                    <div class="form-row">
                        <div class="form-group col-md-2">
                            <div class="thumbnail">
                                <div class="caption">
                                    <label for="desde">Desde</label>
                                    <input type="number" class="form-control" id="desde">
                                </div>
                                <div class="caption">
                                    <label for="hasta">hasta</label>
                                    <input type="number" class="form-control" id="hasta">
                                </div>

                                <div class="caption">
                                    <label for="porcpersona">% dscto</label>
                                    <input type="number" class="form-control" id="porcpersona">
                                </div>
                            </div>
                        </div>
                        <div class="form-group col-md-6">
                            <div class="panel panel-default">
                                <div class="panel-heading">Promociones de Personas</div>
                                <table class="table" id="tbPersona">
                                </table>
                            </div>
                        </div>
                        <div class="form-group col-md-4">
                            <img src="assets/images/personas.png " alt=" " class="img-responsive d-inline-block pull-left ">
                        </div>
                    </div>
                </section>
                <section class="container">
                    <div class="form-row">
                        <div class="form-group col-md-4">
                            <button id="btnguardar" class="btn btn-primary" >Guardar</button>
                        </div>
                    </div>
                </section>
            </div>
            <div id="tabs-2">
                <br><h2>Rubro</h2>
                <section class="container">
                    <div class="form-row">
                        <div class="form-group col-md-2">
                            <div class="thumbnail">
                                <div class="caption">
                                    <label for="idrubro">Rubro</label>
                                    <select class="form-control" id="idrubro">
                                    </select>
                                </div>
                                <div class="caption">
                                    <label for="porcrubro">% dscto</label>
                                    <input type="number" class="form-control" id="porcrubro">
                                </div>
                            </div>
                        </div>
                        <div class="form-group col-md-6">
                            <div class="panel panel-default">
                                <div class="panel-heading">Promociones de Rubro</div>
                                <table class="table" id="tbRubro">
                                </table>
                            </div>
                        </div>
                        <div class="form-group col-md-4">
                            <img src="assets/images/rubros.jpg " alt=" " class="img-responsive d-inline-block pull-left ">
                        </div>
                    </div>
                </section>
                <section class="container">
                    <div class="form-row">
                        <div class="form-group col-md-4">
                            <button id="btnguardarrubro" class="btn btn-primary" >Guardar</button>
                        </div>
                    </div>
                </section>
            </div>
            <div id="tabs-3">
                <br><h2>Banco</h2>
                <section class="container">
                    <div class="form-row">
                        <div class="form-group col-md-2">
                            <div class="thumbnail">
                                <div class="caption">
                                    <label for="idbanco">Banco</label>
                                    <select class="form-control" id="idbanco">
                                    </select>
                                </div>
                                <div class="caption">
                                    <label for="porcbanco">% dscto</label>
                                    <input type="number" class="form-control" id="porcbanco">
                                </div>
                            </div>
                        </div>
                        <div class="form-group col-md-6">
                            <div class="panel panel-default">
                                <div class="panel-heading">Promociones de Banco</div>
                                <table class="table" id="tbBanco">
                                </table>
                            </div>
                        </div>
                        <div class="form-group col-md-4">
                            <img src="assets/images/bancos.jpg " alt=" " class="img-responsive d-inline-block pull-left ">
                        </div>
                    </div>
                </section>
                <section class="container">
                    <div class="form-row">
                        <div class="form-group col-md-4">
                            <button id="btnguardarbanco" class="btn btn-primary" >Guardar</button>
                        </div>
                    </div>
                </section>
            </div>
            <div id="tabs-4">
                <br><h2>Combo</h2>
                <section class="container">
                    <div class="form-row">
                        <div class="form-group col-md-3">
                            <div class="thumbnail">
                                <div class="caption">
                                    <label for="idcombo">Combo</label>
                                    <select class="form-control" id="idcombo">
                                    </select>
                                </div>
                                <div class="caption">
                                    <label for="preciocombo">Precio combo</label>
                                    <input type="number" class="form-control" id="preciocombo">
                                </div>
                            </div>
                        </div>
                        <div class="form-group col-md-5">
                            <div class="panel panel-default">
                                <div class="panel-heading">Promociones de Combo</div>
                                <table class="table" id="tbCombo">
                                </table>
                            </div>
                        </div>
                        <div class="form-group col-md-4">
                            <img src="assets/images/combos.jpg " alt=" " class="img-responsive d-inline-block pull-left ">
                        </div>
                    </div>
                </section>
                <section class="container">
                    <div class="form-row">
                        <div class="form-group col-md-4">
                            <button id="btnguardarcombo" class="btn btn-primary" >Guardar</button>
                        </div>
                    </div>
                </section>
            </div>
        </div>

    </section>
    <footer class="container-fluid " >

        <div class="row ">
            <div class="col-md-12 text-center ">
                <ul class="d-inline-block copyrigth ">
                    <li>Dagama Company</li>
                    <li>©Copyright 2019</li>
                    <!-- <li>Developed By Kreatico</li> -->
                </ul>
                
            </div>
        </div>
    </footer>

    <script src="assets/js/jquery.min.js "></script>
    <script src="assets/js/jquery-migrate.min.js "></script>
    <!--bootstrap js plugin-->
    <script src="assets/js/bootstrap.min.js " type="text/javascript "></script>
    <!--easing plugin for smooth scroll-->
    <script src="assets/js/jquery.easing.1.3.min.js " type="text/javascript "></script>
    <!--sticky header-->
    <script type="text/javascript " src="assets/js/jquery.sticky.js "></script>
    <!--flex slider plugin-->
    <script src="assets/js/jquery.flexslider-min.js " type="text/javascript "></script>
    <!--parallax background plugin-->
    <script src="assets/js/jquery.stellar.min.js " type="text/javascript "></script>
    <!--digit countdown plugin-->
    <script src="assets/js/waypoints.min.js "></script>
    <!--digit countdown plugin-->
    <script src="assets/js/jquery.counterup.min.js " type="text/javascript "></script>
    <!--on scroll animation-->
    <script src="assets/js/wow.min.js " type="text/javascript "></script>
    <!--owl carousel slider-->
    <script src="assets/owl-carousel/dist/owl.carousel.min.js " type="text/javascript "></script>
    <!--popup js-->
    <script src="assets/js/jquery.magnific-popup.min.js " type="text/javascript "></script>
    <!--customizable plugin edit according to your needs-->
    <script src="assets/js/custom.js " type="text/javascript "></script>
    <script type="text/javascript " src="assets/rs-plugin/js/jquery.themepunch.tools.min.js "></script>
    <script type="text/javascript " src="assets/rs-plugin/js/jquery.themepunch.revolution.min.js "></script>
    <script type="text/javascript " src="assets/rs-plugin/videojs/video.js "></script>
    <script type="text/javascript " src="assets/js/revolution-custom.js "></script>
    <script src="assets/js/bootstrap-select.min.js " type="text/javascript "></script>
    <script src="assets/js/jquery-ui.min.js " type="text/javascript "></script>
    <script src="assets/cubeportfolio/js/jquery.cubeportfolio.min.js " type="text/javascript "></script>
    <script src="assets/js/cube-portfolio.js " type="text/javascript "></script>
    <script src="assets/js/pace.min.js " type="text/javascript "></script>

    <script type="text/javascript">
        $( document ).ready(function() {

            ///llenar cine en el combo
            $("#idcine").html('');
            $.get( "http://localhost:8080/api/cines", function(data){
                debugger;
                $.each( data, function(index, value){
                $("#idcine").append($('<option>', {
                    value: value.idcine,
                    text: value.nombre_cine
                    }));
                });
                }).fail(function( data ){
                    alert("Error");
            });

            ///llenar el banco en el combo
            $("#idbanco").html('');
            $.get( "http://localhost:8080/api/bancos", function(data){
                $.each( data, function(index, value){
                    $("#idbanco").append($('<option>', {
                        value: value.idbanco,
                        text: value.nombre_banco
                    }));
                });
                }).fail(function( data ){
                    alert("Error");
            });

            ///llenar el combo en el combo
            $("#idcombo").html('');
            $.get( "http://localhost:8080/api/combos", function(data){
                debugger;
                $.each( data, function(index, value){
                    $("#idcombo").append($('<option>', {
                        value: value.idcombo,
                        text: value.nombre_combo
                    }));
                });
                }).fail(function( data ){
                    alert("Error");
            });

            $( "#idcine" ).change(function() {
                $.get( "http://localhost:8080/api/cine/"+$( "#idcine" ).val(), function(data){
                    debugger;
                    $("#cinexid").val("Nombre: "+data.nombre_cine + '\r\n'  + "RUC: "+data.ruc + '\r\n' +
                        "Dirección: "+data.direccion + '\r\n' + "Email: "+data.email + '\r\n' + "Teléfono: "+data.telefono);
                    }).fail(function( data ){
                        alert("Error");
            });

            ///llenar promocion x cine
            $("#promocionxid").html('');
            $.get( "http://localhost:8080/api/promocioncine/"+$( "#idcine" ).val(), function(data){
            debugger;
                $.each( data, function(index, value){
                $("#promocionxid").append($('<option>', {
                    value: value.idpromocion,
                    text: value.nombre_promocion
                    }));
                });
                }).fail(function( data ){
                    alert("Error");
            });});

            $( "#btnnuevo" ).click(function() {
                $("#nombrepromo").val(""),
                $("#precio").val(""),
                $("#dtfechainicio").val(""),
                $("#dtfechafinal").val(""),
                $("#desde").val(""),
                $("#hasta").val(""),
                $("#porcpersona").val("");
            });

            $( "#promocionxid" ).change(function() {
                debugger;
                $.get( "http://localhost:8080/api/promocion/"+$( "#promocionxid" ).val(), function(data){
                    $("#nombrepromo").val(data.nombre_promocion),
                    $("#precio").val(data.precio),
                    $("#dtfechainicio").val(data.fecha_inicio),
                    $("#dtfechafinal").val(data.fecha_final);
                    }).fail(function( data ){
                        alert("Error");
                    });

                    ////Promociones Listar por IdPromocion
                    ///Persona
                    $("#tbPersona").html('');
                    $.get( "http://localhost:8080/api/promocionPersonas/"+$( "#promocionxid" ).val(), function(data){
                    debugger;
                      for(var i=0; i<data.length; i++){
                        var tr = `<tr>
                          <td>Desde `+data[i].rango_inicial+` hasta `+data[i].rango_final+` || descuento: `+data[i].porcentaje_descuento+` %</td>
                        </tr>`;
                        $("#tbPersona").append(tr)
                      }
                    });

                    ///Rubro
                    $("#tbRubro").html('');
                    $.get( "http://localhost:8080/api/promocionRubroes/"+$( "#promocionxid" ).val(), function(data){
                    debugger;
                      for(var i=0; i<data.length; i++){
                        var tr = `<tr>
                          <td>`+data[i].idrubro+` || descuento: `+data[i].porcentaje_descuento+` %</td>
                        </tr>`;
                        $("#tbRubro").append(tr)
                      }
                    });

                    ///Bancos
                    $("#tbBanco").html('');
                    $.get( "http://localhost:8080/api/promocionBancos/"+$( "#promocionxid" ).val(), function(data){
                    debugger;
                      for(var i=0; i<data.length; i++){
                        var tr = `<tr>
                          <td>`+data[i].idbanco+` || descuento: `+data[i].porcentaje_descuento+` %</td>
                        </tr>`;
                        $("#tbBanco").append(tr)
                      }
                    });

                    ///Combos
                    $("#tbCombo").html('');
                    $.get( "http://localhost:8080/api/promocionCombos/"+$( "#promocionxid" ).val(), function(data){
                    debugger;
                      for(var i=0; i<data.length; i++){
                        var tr = `<tr>
                          <td>`+data[i].idcombo+` || precio: `+data[i].precio_combo+`</td>
                        </tr>`;
                        $("#tbCombo").append(tr)
                      }
                    });
                });

                $( "#tabs" ).tabs();

           ///Grabar promocion persona
           $( "#btnguardar" ).click(function() {
                var datos={"idpromocion": $("#promocionxid").val(),
                        "rango_inicial": $("#desde").val(), "rango_final": $("#hasta").val(),
                        "porcentaje_descuento": $("#porcpersona").val(), "estado": 1};
                debugger;

                $.ajax({
                    url: "http://localhost:8080/api/promocionPersona",
                    type: 'post',
                    dataType: 'json',
                    contentType: 'application/json',
                    success: function (data) {
                       alert("Registro guardado correctamente");
                    },
                    data: JSON.stringify(datos)
                });
           });

           ///Grabar promocion rubro
           $( "#btnguardarrubro" ).click(function() {
                var datos={"idpromocion": $("#promocionxid").val(),
                        "idrubro": $("#idrubro").val(),
                        "porcentaje_descuento": $("#porcrubro").val(), "estado": 1};
                debugger;

                $.ajax({
                    url: "http://localhost:8080/api/promocionRubro",
                    type: 'post',
                    dataType: 'json',
                    contentType: 'application/json',
                    success: function (data) {
                       alert("Registro guardado correctamente");
                    },
                    data: JSON.stringify(datos)
                });
           });

           ///Grabar promocion
           $( "#btnGrabar" ).click(function() {
                var datos={"idcine": $("#idcine").val(), "nombre_promocion": $("#nombrepromo").val(),
                "fecha_inicio": $("#dtfechainicio").val(), "fecha_final": $("#dtfechafinal").val(),
                "fecharegistro":"19/04/2019", "precio": $("#precio").val(), "estado": 1};
                debugger;

                $.ajax({
                    url: "http://localhost:8080/api/promocion",
                    type: 'post',
                    dataType: 'json',
                    contentType: 'application/json',
                    success: function (data) {
                       alert("Registro guardado correctamente");
                    },
                    data: JSON.stringify(datos)
                });
           });

           ///Grabar promocion combo
           $( "#btnguardarcombo" ).click(function() {
                var datos={"idpromocion": $("#promocionxid").val(), "idcombo": $("#idcombo").val(),
                        "precio_combo": $("#preciocombo").val(), "estado": 1, "fecha_registro":"19/04/2019"};


                $.ajax({
                    url: "http://localhost:8080/api/promocionCombo",
                    type: 'post',
                    dataType: 'json',
                    contentType: 'application/json',
                    success: function (data) {
                       alert("Registro guardado correctamente");
                    },
                    data: JSON.stringify(datos)
                });
           });

           ///llenar el rubro en el combo
            $("#idrubro").html('');
            $.get( "http://localhost:8080/api/rubros", function(data){
                $.each( data, function(index, value){
                    $("#idrubro").append($('<option>', {
                        value: value.idrubro,
                        text: value.nombre_rubro
                    }));
                });
                }).fail(function( data ){
                    alert("Error");
            });

            ///Grabar promocion banco
           $( "#btnguardarbanco" ).click(function() {
                var datos={"idpromocion": $("#promocionxid").val(),
                        "idbanco": $("#idbanco").val(),
                        "porcentaje_descuento": $("#porcbanco").val(), "estado": 1};
                debugger;

                $.ajax({
                    url: "http://localhost:8080/api/promocionBanco",
                    type: 'post',
                    dataType: 'json',
                    contentType: 'application/json',
                    success: function (data) {
                       alert("Registro guardado correctamente");
                    },
                    data: JSON.stringify(datos)
                });
           });

        });
    </script>
</body>

</html>